import React from 'react'
import Img from 'gatsby-image'
import PropTypes from 'prop-types'
import styles from './PostHeader.module.css'
import BrowserFrame from '../BroswerFrame'
import { hexToRgba } from '../../utilities/js'

function PostHeader(props) {
  const {
    title,
    description,
    role,
    tools,
    topics,
    link,
    date,
    author,
    postColor,
    imageUrl,
    ...restProps
  } = props

  let rgbPostColor
  if (postColor) {
    rgbPostColor = hexToRgba(postColor, 0.4)
  } else {
    rgbPostColor = 'rgba(255,255,255,0)'
  }

  let PostColorWrapper = {
    background: `linear-gradient(180deg, ${rgbPostColor} 0%, rgba(250,250,250,1) 100%)`,
    padding: '0 10px var(--space-40)',
  }

  const  linkSvg = (
    <svg viewBox="-15 -23 80 80"  className={styles.svg} role="img">
      <g>
        <path d="M49.467,3.51c-4.677-4.679-12.291-4.681-16.97,0l-9.192,9.192c-0.391,0.391-0.391,1.023,0,1.414s1.023,0.391,1.414,0
          l9.192-9.192c1.88-1.88,4.391-2.915,7.07-2.915c2.681,0,5.191,1.036,7.071,2.916s2.916,4.391,2.916,7.071
          c0,2.68-1.036,5.19-2.916,7.07L36.033,31.088c-3.898,3.898-10.244,3.898-14.143,0c-0.391-0.391-1.023-0.391-1.414,0
          s-0.391,1.023,0,1.414c2.34,2.339,5.412,3.509,8.485,3.509s6.146-1.17,8.485-3.509L49.467,20.48
          c2.258-2.258,3.502-5.271,3.502-8.485C52.969,8.781,51.725,5.768,49.467,3.51z"/>
        <path d="M26.84,40.279l-7.778,7.778c-1.88,1.88-4.391,2.916-7.071,2.916c-2.68,0-5.19-1.036-7.071-2.916
          c-3.898-3.898-3.898-10.243,0-14.142l11.314-11.314c3.899-3.898,10.244-3.896,14.142,0c0.391,0.391,1.023,0.391,1.414,0
          s0.391-1.023,0-1.414c-4.677-4.679-12.291-4.681-16.97,0L3.505,32.502c-2.258,2.258-3.501,5.271-3.501,8.485
          c0,3.214,1.244,6.227,3.502,8.484s5.271,3.502,8.484,3.502c3.215,0,6.228-1.244,8.485-3.502l7.778-7.778
          c0.391-0.391,0.391-1.023,0-1.414S27.231,39.889,26.84,40.279z"/>
      </g>
    </svg>
  )

  const roleSvg = (
    <svg viewBox="0 0 500 500" className={styles.svg} role="img"><path d="m171.65625 182.828125c-29.871094 8.007813-47.597656 38.714844-39.59375 68.589844 8.007812 29.871093 38.710938 47.597656 68.585938 39.59375 29.871093-8.003907 47.601562-38.707031 39.597656-68.582031-8.039063-29.847657-38.71875-47.5625-68.589844-39.601563zm53.136719 43.746094c4.433593 16.550781-2.167969 34.089843-16.414063 43.609375-14.25 9.519531-32.980468 8.910156-46.574218-1.523438-13.59375-10.429687-19.035157-28.363281-13.527344-44.589844 5.507812-16.226562 20.738281-27.144531 37.875-27.144531 18.097656.019531 33.9375 12.171875 38.640625 29.648438zm0 0"/><path d="m202.953125 83.324219c-1.144531-4.265625-5.535156-6.800781-9.800781-5.65625l-92.703125 24.859375c-3.878907 1.035156-6.386719 4.789062-5.867188 8.765625.523438 3.980469 3.914063 6.957031 7.929688 6.960937.703125 0 1.402343-.09375 2.078125-.273437l92.761718-24.847657c4.25-1.167968 6.753907-5.554687 5.601563-9.808593zm0 0"/><path d="m472.40625 77.199219c-6.054688-8.726563-15.355469-14.660157-25.824219-16.464844l-141.871093-25.046875c-7.644532-1.304688-15.507813-.367188-22.632813 2.703125l-2.398437-8.800781c-5.808594-21.269532-27.671876-33.882813-48.992188-28.265625l-200.929688 53.875c-10.246093 2.742187-18.976562 9.453125-24.269531 18.644531-5.296875 9.191406-6.714843 20.113281-3.945312 30.355469l95.199219 355.429687c4.664062 17.484375 20.484374 29.65625 38.578124 29.6875 3.511719-.007812 7.007813-.472656 10.398438-1.382812l93.761719-25.121094 132.054687 23.351562c2.304688.40625 4.636719.609376 6.976563.609376 19.394531-.054688 35.960937-13.996094 39.328125-33.09375l61.113281-346.625c1.90625-10.429688-.449219-21.183594-6.546875-29.855469zm-349.054688 392.871093c-5.519531-3.171874-9.535156-8.421874-11.152343-14.578124l-95.214844-355.460938c-1.65625-6.140625-.804687-12.6875 2.367187-18.199219 3.175782-5.507812 8.410157-9.53125 14.550782-11.179687l200.953125-53.847656c12.808593-3.351563 25.925781 4.230468 29.414062 17l95.203125 355.425781c1.660156 6.148437.804688 12.703125-2.378906 18.21875-3.179688 5.519531-8.429688 9.539062-14.582031 11.179687l-14.488281-54.070312c-12.578126-46.941406-60.828126-74.796875-107.769532-62.226563l-30.902344 8.28125c-46.910156 12.628907-74.746093 60.847657-62.222656 107.785157l14.503906 54.078124c-6.171874 1.671876-12.753906.804688-18.28125-2.40625zm33.703126-1.738281-14.496094-54.078125c-10.234375-38.402344 12.535156-77.847656 50.914062-88.183594l30.910156-8.289062c6.117188-1.644531 12.421876-2.476562 18.753907-2.480469 32.535156.101563 60.972656 21.980469 69.414062 53.402344l14.480469 54.0625zm306.183593-364.101562-61.085937 346.679687c-2.285156 13.054688-14.722656 21.789063-27.777344 19.503906l-98.34375-17.382812 70.578125-18.9375c10.265625-2.722656 19.027344-9.417969 24.34375-18.613281 5.320313-9.195313 6.757813-20.128907 4-30.386719l-88.65625-331.039062c4.777344-2.621094 10.300781-3.542969 15.671875-2.617188l141.839844 25.046875c13.027344 2.296875 21.726562 14.71875 19.429687 27.746094zm0 0"/></svg>
  )

  const topicSvg = (
    <svg viewBox="0 0 55 55" className={styles.svg} role="img">
      <path d="M45.297,21.946l9.656-5.517L27.477,0.825L0,16.429l9.656,5.517L0,27.429l9.656,5.517L0,38.429l27.477,15.698l27.476-15.698
      l-9.656-5.483l9.656-5.517L45.297,21.946z M27.477,3.125l23.435,13.309l-23.435,13.39L4.041,16.434L27.477,3.125z M11.675,23.099
      l15.802,9.028l15.802-9.028l7.633,4.335l-23.435,13.39L4.041,27.434L11.675,23.099z M50.912,38.434l-23.435,13.39L4.041,38.434
      l7.634-4.335l15.802,9.028l15.802-9.028L50.912,38.434z"/>
    </svg>
  )

  const toolSvg = (
    <svg viewBox="0 -70 450 450"  className={styles.svg} role="img"><path d="m167.289062 272.132812c-1.601562 0-3.214843-.550781-4.53125-1.671874l-45.296874-38.570313c-1.5625-1.332031-2.460938-3.277344-2.460938-5.332031 0-2.050782.902344-3.996094 2.460938-5.328125l45.296874-38.570313c2.941407-2.507812 7.359376-2.152344 9.867188.789063 2.503906 2.945312 2.152344 7.363281-.792969 9.867187l-39.035156 33.242188 39.035156 33.242187c2.945313 2.507813 3.296875 6.925781.792969 9.867188-1.386719 1.628906-3.355469 2.464843-5.335938 2.464843zm0 0"/><path d="m256.710938 272.132812c-1.980469 0-3.949219-.835937-5.332032-2.464843-2.507812-2.941407-2.152344-7.359375.789063-9.867188l39.035156-33.242187-39.035156-33.242188c-2.941407-2.503906-3.296875-6.921875-.789063-9.867187 2.503906-2.941407 6.925782-3.296875 9.863282-.789063l45.296874 38.570313c1.5625 1.332031 2.460938 3.277343 2.460938 5.328125 0 2.054687-.898438 4-2.460938 5.332031l-45.296874 38.570313c-1.316407 1.121093-2.929688 1.671874-4.53125 1.671874zm0 0"/><path d="m195.964844 301.0625c-.480469 0-.964844-.050781-1.453125-.152344-3.78125-.796875-6.203125-4.511718-5.40625-8.292968l28.230469-134.035157c.796874-3.78125 4.507812-6.203125 8.292968-5.40625 3.78125.796875 6.203125 4.507813 5.40625 8.292969l-28.230468 134.035156c-.695313 3.296875-3.601563 5.558594-6.839844 5.558594zm0 0"/><path d="m377 374.085938h-330c-25.914062 0-47-21.082032-47-47v-280.085938c0-25.914062 21.085938-47 47-47h330c25.914062 0 47 21.085938 47 47v280.085938c0 25.917968-21.085938 47-47 47zm-330-360.085938c-18.195312 0-33 14.804688-33 33v280.085938c0 18.195312 14.804688 33 33 33h330c18.195312 0 33-14.804688 33-33v-280.085938c0-18.195312-14.804688-33-33-33zm0 0"/><path d="m417 112.089844h-410c-3.867188 0-7-3.132813-7-7 0-3.863282 3.132812-7 7-7h410c3.867188 0 7 3.136718 7 7 0 3.867187-3.132812 7-7 7zm0 0"/><path d="m119.601562 78.59375c-12.210937 0-22.152343-9.941406-22.152343-22.152344 0-12.214844 9.941406-22.152344 22.152343-22.152344 12.214844 0 22.152344 9.9375 22.152344 22.152344 0 12.210938-9.9375 22.152344-22.152344 22.152344zm0-30.304688c-4.492187 0-8.152343 3.65625-8.152343 8.152344s3.660156 8.152344 8.152343 8.152344c4.496094 0 8.152344-3.65625 8.152344-8.152344s-3.65625-8.152344-8.152344-8.152344zm0 0"/><path d="m51.539062 78.378906c-12.214843 0-22.152343-9.9375-22.152343-22.152344 0-12.214843 9.9375-22.152343 22.152343-22.152343 12.214844 0 22.152344 9.9375 22.152344 22.152343 0 12.214844-9.9375 22.152344-22.152344 22.152344zm0-30.304687c-4.492187 0-8.152343 3.660156-8.152343 8.152343 0 4.496094 3.660156 8.152344 8.152343 8.152344 4.496094 0 8.152344-3.65625 8.152344-8.152344 0-4.492187-3.65625-8.152343-8.152344-8.152343zm0 0"/><path d="m187.664062 78.804688c-12.210937 0-22.148437-9.9375-22.148437-22.152344 0-12.210938 9.9375-22.148438 22.148437-22.148438 12.214844 0 22.152344 9.9375 22.152344 22.148438 0 12.214844-9.9375 22.152344-22.152344 22.152344zm0-30.304688c-4.492187 0-8.148437 3.65625-8.148437 8.152344s3.65625 8.152344 8.148437 8.152344c4.496094 0 8.152344-3.65625 8.152344-8.152344s-3.65625-8.152344-8.152344-8.152344zm0 0"/></svg>
  )

  const linkUrl = `https://${link}`
  
  let PostHeaderImage = (
    <React.Fragment>
      {imageUrl && <Img className={styles.PostHeaderImage} fluid={imageUrl} />}
    </React.Fragment>
  )

  return (
    <BrowserFrame>
      <div className={styles.PostDottedWrapper}>
        <div style={PostColorWrapper}>
          {/* {PostHeaderImage} */}
          <div className={styles.PostTitleWrapper}>
            {title && <h1 className={styles.PostTitle}>{title}</h1>}
            {description &&
              <h3 className={styles.PostSubTitle}>{description}</h3>
            }
            {link &&
              <p className={styles.PostSubTitle}>
                {linkSvg}
                <a target="_blank" rel="noopener" href={linkUrl}>
                  {link}
                </a>
              </p>
            }
          </div>
          {tools && role &&
            <div className={styles.PostDescription}>
              {role && 
                <p>
                 <span className={styles.PostDescriptionTitle}>Role</span>{roleSvg}: {role} 
                </p>
              }
              {tools && 
                <p>
                  <span className={styles.PostDescriptionTitle}>Tools</span>{toolSvg}: {tools}
                </p>
              }
            </div>
          }
          {topics && date && author &&
            <div className={styles.PostDescription}>
              {topics && 
                <p>
                  <span className={styles.PostDescriptionTitle}>Topics</span>{topicSvg}: {topics}
                </p>
              }
              {author && 
                <p>
                  <span className={styles.PostDescriptionTitle}>Author</span>{roleSvg}: {author}
                </p>
              }
            </div>
          }
        </div>
      </div>
    </BrowserFrame>
  )
}

PostHeader.propTypes = {
  title: PropTypes.string.isRequired,
  description: PropTypes.string,
  role: PropTypes.string,
  tools: PropTypes.string,
  link: PropTypes.string,
  date: PropTypes.string,
  topics: PropTypes.string,
  author: PropTypes.string,
  postColor: PropTypes.string,
  imageUrl: PropTypes.object,
}

PostHeader.defaultProps = {
  description: null,
  role: null,
  link: null,
  tools: null,
  date: null,
  topics: null,
  author: null,
  imageUrl: null,
  postColor: null,
}

export default PostHeader
